(window["webpackJsonp_@app/map-webpack"]=window["webpackJsonp_@app/map-webpack"]||[]).push([["marker-polygon"],{"7e70":function(e,t,o){"use strict";o.r(t);var c=o("190e"),n={id:"map",ref:"refMap",class:"leaflet-map-class"},l={class:"operation"},r=Object(c["createTextVNode"])("绘制标记"),a=Object(c["createTextVNode"])("绘制多边形"),i=Object(c["createTextVNode"])("拖动多边形"),s=Object(c["createTextVNode"])("编辑多边形"),u=Object(c["createTextVNode"])("导入行政边界（KML文件）"),d=Object(c["createTextVNode"])("导入行政边界（KML文件）"),p=["src"],b=["src"];function m(e,t,o,m,f,j){var O=Object(c["resolveComponent"])("el-button"),k=Object(c["resolveComponent"])("el-upload"),C=Object(c["resolveComponent"])("v-contextmenu-item"),g=Object(c["resolveComponent"])("v-contextmenu-group"),w=Object(c["resolveComponent"])("v-contextmenu"),h=Object(c["resolveDirective"])("contextmenu");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",n,[Object(c["createElementVNode"])("div",l,[Object(c["createVNode"])(O,{type:"primary",icon:"el-icon-share",size:"small",onClick:Object(c["withModifiers"])(e.markClick,["stop"])},{default:Object(c["withCtx"])((function(){return[r]})),_:1},8,["onClick"]),Object(c["createVNode"])(O,{type:"primary",icon:"el-icon-share",size:"small",onClick:Object(c["withModifiers"])(e.plotClick,["stop"])},{default:Object(c["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(c["createVNode"])(O,{type:"primary",icon:"el-icon-share",size:"small",onClick:Object(c["withModifiers"])(e.dragClick,["stop"])},{default:Object(c["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(c["createVNode"])(O,{type:"primary",icon:"el-icon-share",size:"small",onClick:Object(c["withModifiers"])(e.editClick,["stop"])},{default:Object(c["withCtx"])((function(){return[s]})),_:1},8,["onClick"]),Object(c["createVNode"])(O,{type:"primary",icon:"el-icon-share",size:"small",onClick:Object(c["withModifiers"])(e.importClick,["stop"])},{default:Object(c["withCtx"])((function(){return[u]})),_:1},8,["onClick"]),Object(c["createVNode"])(k,{class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","before-upload":e.beforeUpload,"on-success":e.onSuccess},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{size:"small",type:"primary"},{default:Object(c["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["before-upload","on-success"])])])),[[h,void 0,"contextmenu"]]),Object(c["createVNode"])(w,{ref:"contextmenu"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(g,{title:""},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{onClick:e.savePolygon},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("img",{src:e.url,class:"image-size"},null,8,p)]})),_:1},8,["onClick"]),Object(c["createVNode"])(C,{onClick:e.deletePolygon},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("img",{src:e.url,class:"image-size"},null,8,b)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},512)],64)}var f,j=o("87d2"),O=o("92f8"),k=(o("8607"),o("7fc3")),C=(o("2fd0"),o("16e5")),g=(o("8442"),Object(c["defineComponent"])({directives:{contextmenu:C["f"]},components:(f={},Object(O["a"])(f,C["a"].name,C["a"]),Object(O["a"])(f,C["d"].name,C["d"]),Object(O["a"])(f,C["b"].name,C["b"]),Object(O["a"])(f,C["e"].name,C["e"]),Object(O["a"])(f,C["c"].name,C["c"]),f),setup:function(){var e=Object(c["ref"])(null),t=Object(c["ref"])(null),o={},n=Object(c["reactive"])({url:"../images/map-app/btn-save-normal.png",markerPoint:{},plotPolygon:[]}),l=function(){o.pm.enableDraw("Marker",{continueDrawing:!1})},r=function(){console.log("open"),o.pm.enableDraw("Polygon",{pinning:!0,snappable:!0,measurements:{measurement:!0}})},a=function(){o.pm.enableGlobalEditMode({allowSelfIntersection:!1})},i=function(){console.log("drag"),o.pm.enableGlobalDragMode()},s=function(){console.log("导入kml")},u=function(e){console.log(e,"beforeUpload----上传文件");var t=new FileReader;t.readAsBinaryString(e),t.onload=function(){console.log(t.result,"fileReader.result");var e=new DOMParser,c=e.parseFromString(t.result,"text/xml"),n=new L.KML(c);console.log(n,"track"),o.addLayer(n);var l=n.getBounds();o.fitBounds(l)}},d=function(e,t,o){console.log("success----on",e,t)};return Object(c["onMounted"])((function(){var e=Object(k["a"])(),t=e.init;o=t([34.263742732916505,108.01650524139406]),o.on("pm:create",(function(e){"Polygon"===e.shape&&console.log("绘制多边形",e),"Marker"===e.shape&&o.eachLayer((function(t){console.log(t._url,t._leaflet_id,t.pm),t.pm&&"Marker"===t.pm._shape&&e.marker._leaflet_id!==t._leaflet_id&&t.remove()})),e.layer.on("click",(function(){console.log("创建了图层后的click事件")})),e.layer.on("pm:edit",(function(e){console.log(e,"pm:edit拖动")}))}))})),Object(j["a"])(Object(j["a"])({},Object(c["toRefs"])(n)),{},{refMap:t,contextmenu:e,plotClick:r,dragClick:i,markClick:l,editClick:a,importClick:s,beforeUpload:u,onSuccess:d})}})),w=(o("82d1"),o("d422")),h=o.n(w);const v=h()(g,[["render",m],["__scopeId","data-v-1db79f72"]]);t["default"]=v},"82d1":function(e,t,o){"use strict";o("f0b6")},f0b6:function(e,t,o){}}]);